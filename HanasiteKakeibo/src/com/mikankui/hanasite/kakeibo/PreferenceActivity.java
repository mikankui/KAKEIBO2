package com.mikankui.hanasite.kakeibo;import android.app.Activity;import android.content.Intent;import android.content.SharedPreferences;import android.os.Bundle;import android.view.View;import android.view.View.OnClickListener;import android.widget.Button;import android.widget.EditText;public class PreferenceActivity extends Activity{    private static final String PREFERRENCES_FILE_NAME = "PrefrencesFile";          /* WriteボタンClickリスナー */      private OnClickListener btnWrite_OnClickListener = new OnClickListener(){          public void onClick(View v) {btnWrite_OnClick(v);}};      /* ReadボタンClickリスナー */      private OnClickListener btnRead_OnClickListener = new OnClickListener(){          public void onClick(View v) {btnRead_OnClick(v);}};      /* AllClearボタンClickリスナー */      private OnClickListener btnAllClear_OnClickListener = new OnClickListener(){          public void onClick(View v) {btnAllClear_OnClick(v);}};      /* AllClearボタンClickリスナー */      private OnClickListener btnReturn_OnClickListener = new OnClickListener(){          public void onClick(View v) {btnReturnMainView_OnClick(v);}};          /*      * onCreate      */      @Override      protected void onCreate(Bundle savedInstanceState) {          super.onCreate(savedInstanceState);          setContentView(R.layout.preference);          //Writeボタン          Button btnWrite = (Button)this.findViewById(R.id.setPref);          btnWrite.setOnClickListener(btnWrite_OnClickListener);          //Readボタン          Button btnRead = (Button)this.findViewById(R.id.loadPref);          btnRead.setOnClickListener(btnRead_OnClickListener);          //AllClearボタン          Button btnAllClear = (Button)this.findViewById(R.id.resetPref);          btnAllClear.setOnClickListener(btnAllClear_OnClickListener);         //戻るボタン          Button btnReturn = (Button)this.findViewById(R.id.back);          btnReturn.setOnClickListener(btnAllClear_OnClickListener);    }          /*      * Writeボタン処理      */      private void btnWrite_OnClick(View v){          //プリファレンスのインスタンスを取得          SharedPreferences pre = this.getSharedPreferences(PREFERRENCES_FILE_NAME, MODE_PRIVATE);          //デフォルトプリファレンスのインスタンスを取得する          //SharedPreferences pre = PreferenceManager.getDefaultSharedPreferences(this);          //プリファレンスのエディタを取得          SharedPreferences.Editor editor = pre.edit();          //テキストボックスの値を書き込み          EditText text = (EditText)this.findViewById(R.id.userName);          editor.putString("USERNAME",text.getText().toString());          //保存          editor.commit();      }         /*      * ReadボタンClick処理      */      private void btnRead_OnClick(View v){          //プリファレンスのインスタンスを取得          SharedPreferences pre = this.getSharedPreferences(PREFERRENCES_FILE_NAME, MODE_PRIVATE);          //デフォルトプリファレンスのインスタンスを取得する          //SharedPreferences pre = PreferenceManager.getDefaultSharedPreferences(this);          //読み込み          String str = pre.getString("USERNAME", "NONE");          //テキストボックスに表示          EditText text = (EditText)this.findViewById(R.id.userName);          text.setText(str);      }         /*      * AllClearボタン処理      */      private void btnAllClear_OnClick(View v){          //プリファレンスのインスタンスを取得          SharedPreferences pre = this.getSharedPreferences(PREFERRENCES_FILE_NAME, MODE_PRIVATE);          //デフォルトプリファレンスのインスタンスを取得する          //SharedPreferences pre = PreferenceManager.getDefaultSharedPreferences(this);          //プリファレンスのエディタを取得          SharedPreferences.Editor editor = pre.edit();          //すべての設定を削除          editor.clear();          //保存          editor.commit();      }        private void btnReturnMainView_OnClick(View v){  		finish();    }}