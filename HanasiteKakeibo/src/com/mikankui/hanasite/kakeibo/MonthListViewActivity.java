package com.mikankui.hanasite.kakeibo;import java.util.ArrayList;import java.util.List;import com.mikankui.hanasite.kakeibo.db.DbQuery;import android.app.ListActivity;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.view.View.OnClickListener;import android.widget.AdapterView;import android.widget.Button;import android.widget.TextView;import android.widget.AdapterView.OnItemClickListener;public class MonthListViewActivity extends ListActivity implements		OnItemClickListener, OnClickListener {	private MonthListMemberAdapter adapter;	private List<RowItem> items;	private TextView monthPicker;	private TextView monthSum;	private Button next_month;	private Button back_month;	private Button move_yearListView;	private DbQuery q;	private String unit;	@Override	public void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.month_listview);		unit = getString(R.string.unit).toString();		q = new DbQuery();		items = new ArrayList<RowItem>();		// year picker		monthPicker = (TextView) findViewById(R.id.monthPicker);		monthPicker.setText("" + TargetDate.getYear() + "/"				+ TargetDate.getMonth());		// year sum		monthSum = (TextView) findViewById(R.id.monthSum);		// next and prev Buttom		next_month = (Button) findViewById(R.id.next_month);		next_month.setOnClickListener(this);		back_month = (Button) findViewById(R.id.back_month);		back_month.setOnClickListener(this);		move_yearListView = (Button) findViewById(R.id.move_yearList);		move_yearListView.setOnClickListener(this);		// calc this year		redraw();	}	private void setOnItemClickListener(			YearListViewActivity mainListViewActivity) {		// TODO 自動生成されたメソッド・スタブ	}	@Override	public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {		// TODO 自動生成されたメソッド・スタブ	}	@Override	public void onClick(View v) {		switch (v.getId()) {		case R.id.next_month:			TargetDate.nextMonth();			monthPicker.setText("" + TargetDate.getYear() + "/"					+ TargetDate.getMonth());			redraw();			break;		case R.id.back_month:			TargetDate.backMonth();			monthPicker.setText("" + TargetDate.getYear() + "/"					+ TargetDate.getMonth());			redraw();			break;		case R.id.move_yearList:			Intent intent = new Intent(this, YearListViewActivity.class);			intent.setAction(Intent.ACTION_VIEW);			startActivity(intent);			overridePendingTransition(R.anim.push_right_in,					R.anim.push_right_out);		}	}	private void redraw() {		items.clear();		q = new DbQuery();		int sum = 0;		int tmp = 0;		for (int i = 1; i <= TargetDate.getActualMaximumOfMonth(); i++) {			tmp = q.calDay("kira", "" + TargetDate.getYear(),					"" + TargetDate.getMonth(), "" + i);			sum = sum + tmp;			items.add(new RowItem(i + getString(R.string.day),					getString(R.string.unit) + " " + tmp, ""));		}		monthSum.setText(unit + " " + sum);		adapter = new MonthListMemberAdapter(this, items);		setListAdapter(adapter);	}}