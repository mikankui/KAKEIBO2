package com.mikankui.hanasite.kakeibo;import java.util.List;import android.content.Context;import android.graphics.Color;import android.view.Display;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.view.WindowManager;import android.widget.ArrayAdapter;import android.widget.FrameLayout;import android.widget.TextView;public class YearListMemberAdapter extends ArrayAdapter<RowItem> {	private LayoutInflater mInflater;	private TextView rId;	private TextView rValue;	private String monthStr;	private String unitStr;	WindowManager wm;	Display disp;	Context context;	public YearListMemberAdapter(Context context, List<RowItem> item) {		super(context, 0, item);		monthStr = context.getString(R.string.month);		unitStr = context.getString(R.string.unit);		mInflater = (LayoutInflater) context				.getSystemService(Context.LAYOUT_INFLATER_SERVICE);				//get a size of display 		wm = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);		disp = wm.getDefaultDisplay();		this.context = context;	}	public View getView(final int position, View convertView, ViewGroup parent) {		if (convertView == null) {			convertView = mInflater.inflate(R.layout.main_listitem, null);		}		final RowItem item = this.getItem(position);		if (item != null) {			rId = (TextView) convertView.findViewById(R.id.rowId);			rValue = (TextView) convertView.findViewById(R.id.rowValue);			final FrameLayout lyt_list_row =	                (FrameLayout)convertView.findViewById(R.id.listItem);			lyt_list_row.removeAllViews();			int width = disp.getWidth();			int height = disp.getHeight();			double rate = Double.parseDouble(item.getRowValue().replaceAll(unitStr, ""))/100000;			if(rate>1){				rate=1;				lyt_list_row.setBackgroundColor(Color.RED);			}			int barHeight = (int)(height/30); 			int barWidth = (int)(width*0.6*rate);						BarOnListView bar = new BarOnListView(context,barHeight,barWidth);            lyt_list_row.addView(bar);						rId.setText(String.format("%1$02d", Integer.parseInt(item.getRowid().replaceAll(monthStr, "")))+monthStr);			rValue.setText(item.getRowValue());		}		return convertView;	}}